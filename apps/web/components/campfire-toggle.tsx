"use client";

import { motion, AnimatePresence } from "motion/react";
import { useState, useEffect } from "react";


const seededRandom = (seed: number) => {
    const x = Math.sin(seed * 9999) * 10000;
    return x - Math.floor(x);
};


function Sparkle({ index }: { index: number }) {

    const xOffset = seededRandom(index) * 20 - 10;
    const repeatDelay = seededRandom(index + 50) * 2;
    const leftPos = 30 + seededRandom(index + 100) * 40;
    const delay = index * 0.3;

    return (
        <motion.div
            className="absolute w-1 h-1 rounded-full bg-orange-400"
            initial={{ opacity: 0, y: 0, x: 0 }}
            animate={{
                opacity: [0, 1, 0],
                y: [-5, -25],
                x: [0, xOffset],
            }}
            transition={{
                duration: 1.5,
                delay,
                repeat: Infinity,
                repeatDelay,
            }}
            style={{
                left: `${leftPos}%`,
                bottom: "60%",
            }}
        />
    );
}


function SmokeParticle({ index }: { index: number }) {

    const xOffset = seededRandom(index) * 30 - 15;
    const repeatDelay = seededRandom(index + 50);
    const size = 12 + seededRandom(index + 100) * 8;
    const leftPos = 35 + seededRandom(index + 150) * 30;
    const delay = index * 0.5;

    return (
        <motion.div
            className="absolute rounded-full bg-gray-400/40"
            initial={{ opacity: 0, y: 0, scale: 0.5 }}
            animate={{
                opacity: [0, 0.6, 0],
                y: [-10, -60],
                scale: [0.5, 1.5],
                x: [0, xOffset],
            }}
            transition={{
                duration: 3,
                delay,
                repeat: Infinity,
                repeatDelay,
            }}
            style={{
                width: size,
                height: size,
                left: `${leftPos}%`,
                bottom: "55%",
            }}
        />
    );
}


function CampfireBase() {
    return (
        <svg
            viewBox="0 0 512 512"
            className="w-full h-full"
            style={{ filter: "drop-shadow(0 2px 4px rgba(0,0,0,0.3))" }}
        >
            {/* Grey stone/wood base */}
            <path
                d="M0 0 C0.88845108 -0.00960754 1.77690216 -0.01921509 2.692276 -0.02911377 C4.13128517 -0.03548859 4.13128517 -0.03548859 5.59936523 -0.04199219 C6.59242172 -0.04769226 7.58547821 -0.05339233 8.60862732 -0.05926514 C10.71433446 -0.06871716 12.82005641 -0.07524992 14.92578125 -0.07910156 C18.12128225 -0.08875637 21.31612597 -0.11975697 24.51147461 -0.15136719 C26.56160102 -0.15790267 28.61173201 -0.163151 30.66186523 -0.16699219 C31.60703506 -0.17933899 32.5522049 -0.19168579 33.52601624 -0.20440674 C44.99351182 -0.1666094 55.38232501 3.37649084 63.86108398 11.27050781 C69.92815893 17.78699572 73.13101391 23.37446236 74.59545898 32.16113281 C38.29545898 32.16113281 1.99545898 32.16113281 -35.40454102 32.16113281 C-32.5785447 20.85714754 -28.06245142 12.92016809 -18.40454102 6.16113281 C-12.59095586 3.03253679 -6.68392872 0.05848303 0 0 Z"
                fill="#7F7F7F"
                transform="translate(236.404541015625,447.8388671875)"
            />
            <path
                d="M0 0 C1.30748703 -0.00956978 1.30748703 -0.00956978 2.64138794 -0.01933289 C3.58199066 -0.02044571 4.52259338 -0.02155853 5.49169922 -0.02270508 C6.95154739 -0.02769768 6.95154739 -0.02769768 8.44088745 -0.03279114 C10.50371834 -0.03785696 12.56655743 -0.04019957 14.62939453 -0.04003906 C17.76332422 -0.04221339 20.89689489 -0.06033911 24.03076172 -0.0793457 C26.03857302 -0.08228224 28.04638599 -0.08426529 30.05419922 -0.08520508 C30.98265656 -0.09239059 31.91111389 -0.09957611 32.8677063 -0.10697937 C38.76122362 -0.08661921 43.95946899 0.67784533 49.67138672 2.14526367 C48.17138745 5.19383055 46.52247005 8.0678135 44.73388672 10.95776367 C40.47106311 18.05209785 38.50322182 23.90200571 36.67138672 32.14526367 C12.91138672 32.14526367 -10.84861328 32.14526367 -35.32861328 32.14526367 C-32.50261696 20.8412784 -27.98652368 12.90429895 -18.32861328 6.14526367 C-12.55220988 3.0366771 -6.64605039 0.03308907 0 0 Z"
                fill="#4C4C4C"
                transform="translate(148.32861328125,447.854736328125)"
            />
            <path
                d="M0 0 C1.34137779 -0.00472824 1.34137779 -0.00472824 2.70985413 -0.009552 C3.67241623 -0.00752777 4.63497833 -0.00550354 5.62670898 -0.00341797 C6.61654282 -0.00437469 7.60637665 -0.00533142 8.62620544 -0.00631714 C10.71841495 -0.00699766 12.81062658 -0.0051523 14.90283203 -0.00097656 C18.11357334 0.00437914 21.32417513 -0.00092882 24.53491211 -0.00732422 C26.56551138 -0.00666353 28.59611056 -0.00538255 30.62670898 -0.00341797 C31.59129532 -0.0054422 32.55588165 -0.00746643 33.54969788 -0.009552 C34.44079758 -0.00639984 35.33189728 -0.00324768 36.25 0 C37.03593033 0.00079559 37.82186066 0.00159119 38.63160706 0.00241089 C40.56030273 0.12939453 40.56030273 0.12939453 42.56030273 1.12939453 C41.17211403 4.07103249 39.55451493 6.65835179 37.68530273 9.31689453 C32.64227371 16.83223778 30.5509191 23.17162091 28.56030273 32.12939453 C7.44030273 32.12939453 -13.67969727 32.12939453 -35.43969727 32.12939453 C-32.61370095 20.82540926 -28.09760767 12.8884298 -18.43969727 6.12939453 C-12.61138295 2.99287197 -6.70350326 0.00677906 0 0 Z"
                fill="#7F7F7F"
                transform="translate(68.439697265625,447.87060546875)"
            />
            <path
                d="M0 0 C6.08314386 -0.07463276 12.16601612 -0.12882912 18.24951172 -0.16479492 C20.31531421 -0.17980192 22.38108528 -0.200214 24.44677734 -0.22631836 C27.43074338 -0.26305961 30.41428507 -0.27980764 33.3984375 -0.29296875 C34.76468765 -0.31619453 34.76468765 -0.31619453 36.15853882 -0.33988953 C47.52471687 -0.3428157 57.87675198 3.29904495 66.265625 11.109375 C72.33269995 17.62586291 75.53555492 23.21332954 77 32 C55.88 32 34.76 32 13 32 C12.01 28.04 11.02 24.08 10 20 C8.42304272 16.19126457 8.42304272 16.19126457 6.5625 13 C5.98628906 11.948125 5.41007812 10.89625 4.81640625 9.8125 C3.09791844 7.15161564 1.33003274 5.13031565 -1 3 C-0.67 2.01 -0.34 1.02 0 0 Z"
                fill="#7F7F7F"
                transform="translate(402,448)"
            />
            <path
                d="M0 0 C1.54269058 -0.01354271 1.54269058 -0.01354271 3.11654663 -0.02735901 C5.29007064 -0.041836 7.46363797 -0.05074189 9.63720703 -0.05444336 C12.92947817 -0.06629302 16.21984521 -0.11546626 19.51171875 -0.16601562 C34.38968897 -0.28084118 45.90631788 0.91529822 57.3359375 11.37109375 C63.60585231 17.55352138 66.8880668 23.68386954 68.3359375 32.37109375 C44.5759375 32.37109375 20.8159375 32.37109375 -3.6640625 32.37109375 C-4.6540625 28.41109375 -5.6440625 24.45109375 -6.6640625 20.37109375 C-8.27544185 16.52825961 -8.27544185 16.52825961 -10.1640625 13.30859375 C-10.751875 12.24511719 -11.3396875 11.18164062 -11.9453125 10.0859375 C-13.3890351 7.80551203 -14.76210073 6.23246487 -16.6640625 4.37109375 C-16.6640625 3.71109375 -16.6640625 3.05109375 -16.6640625 2.37109375 C-11.10198616 0.04279626 -5.92848269 0.03239758 0 0 Z"
                fill="#4C4C4C"
                transform="translate(330.6640625,447.62890625)"
            />
            {/* Brown wood logs */}
            <path
                d="M0 0 C4.45703127 1.54609051 8.17284947 3.94269197 12.05078125 6.5703125 C12.70958786 7.0114035 13.36839447 7.45249451 14.04716492 7.9069519 C16.13855377 9.30863946 18.22555676 10.71670424 20.3125 12.125 C21.73474076 13.07985214 23.15726387 14.03428388 24.58007812 14.98828125 C28.05667338 17.32066587 31.52935109 19.65877723 35 22 C32.22979956 27.76097891 29.14705555 33.12960636 25.6875 38.5 C24.61397126 40.18320353 23.541085 41.86681696 22.46875 43.55078125 C21.62183594 44.87843506 21.62183594 44.87843506 20.7578125 46.23291016 C17.70764555 51.03438129 14.69868201 55.86152033 11.6875 60.6875 C11.06383545 61.68612061 10.4401709 62.68474121 9.79760742 63.71362305 C7.86463027 66.80880672 5.93224599 69.90435983 4 73 C1.33389721 77.27118573 -1.33287224 81.54195425 -4 85.8125 C-4.89779175 87.2514563 -4.89779175 87.2514563 -5.8137207 88.71948242 C-6.96374159 90.56083236 -8.11737023 92.39993484 -9.27490234 94.23657227 C-10.48211625 96.17040388 -11.66829059 98.11745641 -12.83837891 100.07397461 C-13.44085449 101.06534424 -14.04333008 102.05671387 -14.6640625 103.078125 C-15.1998291 103.97563477 -15.7355957 104.87314453 -16.28759766 105.79785156 C-18.67149992 108.86354852 -20.96718761 109.6233204 -24.66796875 110.44921875 C-27.9603747 111.22682216 -30.77244805 112.77437978 -33.76171875 114.328125 C-39.12806249 115.93896466 -44.70170213 113.20542458 -49.8125 111.5 C-55.57705759 109.6277109 -60.91245505 108.32611848 -67 108 C-65.67251074 104.42916912 -64.08489016 101.32334436 -62.05078125 98.10546875 C-61.4578125 97.16251953 -60.86484375 96.21957031 -60.25390625 95.24804688 C-59.61324219 94.23806641 -58.97257813 93.22808594 -58.3125 92.1875 C-56.9439033 90.01439037 -55.57541674 87.84121138 -54.20703125 85.66796875 C-53.50658691 84.55856934 -52.80614258 83.44916992 -52.08447266 82.30615234 C-48.87390856 77.21392244 -45.68743617 72.10672538 -42.5 67 C-41.25013188 64.99991758 -40.00013146 62.99991783 -38.75 61 C-38.13125 60.01 -37.5125 59.02 -36.875 58 C-34.0625 53.5 -34.0625 53.5 -31.25 49 C-30.63044434 48.00863037 -30.01088867 47.01726074 -29.37255859 45.99584961 C-28.1309896 44.00950109 -26.88913082 42.02333366 -25.64697266 40.03735352 C-22.39049563 34.82998571 -19.14012572 29.61893281 -15.8984375 24.40234375 C-15.22490234 23.32017578 -14.55136719 22.23800781 -13.85742188 21.12304688 C-12.57299612 19.05910755 -11.29033115 16.99407099 -10.00976562 14.92773438 C-6.82937326 9.82153536 -3.56328377 4.84741056 0 0 Z"
                fill="#BA8B5C"
                transform="translate(250,324)"
            />
            <path
                d="M0 0 C0.93005859 0.51046875 0.93005859 0.51046875 1.87890625 1.03125 C9.88746926 5.41439366 17.93921904 9.71397072 26 14 C24.60233767 17.78801669 22.8508857 21.07756733 20.7265625 24.5078125 C20.07187988 25.56863037 19.41719727 26.62944824 18.74267578 27.72241211 C18.03693735 28.85670359 17.33104231 29.99089764 16.625 31.125 C15.90454266 32.28834269 15.18432977 33.45183681 14.46435547 34.61547852 C-0.31423017 58.47134525 -0.31423017 58.47134525 -6 67 C-7.87255859 67.38476562 -7.87255859 67.38476562 -10.1484375 67.40625 C-10.98358887 67.42623047 -11.81874023 67.44621094 -12.67919922 67.46679688 C-14.01362061 67.48323242 -14.01362061 67.48323242 -15.375 67.5 C-22.37078539 67.70454783 -28.74353342 68.26672639 -35.4921875 70.28125 C-41.37229377 71.9665141 -45.01313411 72.03639362 -50.875 70.0625 C-52.02742188 69.68222656 -53.17984375 69.30195313 -54.3671875 68.91015625 C-55.23601562 68.60980469 -56.10484375 68.30945313 -57 68 C-53.9769154 63.22015922 -50.55938209 59.04087395 -46.8125 54.8125 C-42.96910607 50.42983254 -39.16451175 46.03474831 -35.5 41.5 C-31.38403149 36.41556831 -27.10537281 31.48641797 -22.80566406 26.55786133 C-19.55254742 22.81963917 -16.3673971 19.04064641 -13.25 15.1875 C-9.01590051 9.95575555 -4.54953273 4.9582378 0 0 Z"
                fill="#9F7449"
                transform="translate(170,365)"
            />
            <path
                d="M0 0 C4.90204385 4.4170931 8.25179333 9.60266374 11.83203125 15.11328125 C12.46864182 16.08283249 13.10525238 17.05238373 13.76115417 18.05131531 C15.78389959 21.13473098 17.79829179 24.2235024 19.8125 27.3125 C21.1863005 29.40986456 22.56064349 31.50687388 23.93554688 33.60351562 C27.29665977 38.73157869 30.6509394 43.86405873 34 49 C31.57147338 50.61901774 29.30728994 51.93416353 26.6875 53.1875 C25.94886719 53.55230469 25.21023438 53.91710937 24.44921875 54.29296875 C19.0987458 55.83752314 14.41280506 53.41229602 9.4375 51.5 C-2.733102 47.23334674 -16.25895268 48.06587524 -29 48 C-27.6518016 44.36222387 -26.0139723 41.20839942 -23.9453125 37.9296875 C-23.03084351 36.47369141 -23.03084351 36.47369141 -22.09790039 34.98828125 C-21.44684326 33.96089844 -20.79578613 32.93351562 -20.125 31.875 C-19.46040771 30.81925781 -18.79581543 29.76351563 -18.11108398 28.67578125 C-16.07796386 25.44803615 -14.03931522 22.22383359 -12 19 C-10.77963649 17.06530057 -9.5595673 15.13041545 -8.33984375 13.1953125 C-5.56437081 8.79403277 -2.78379901 4.39601781 0 0 Z"
                fill="#8A6030"
                transform="translate(280,384)"
            />
            <path
                d="M0 0 C3.52076859 1.34374086 4.5683445 5.03493222 6.11029053 8.26367188 C6.66779999 9.38999023 6.66779999 9.38999023 7.23657227 10.5390625 C8.42126455 12.94101722 9.58593339 15.35210604 10.75091553 17.76367188 C11.55045489 19.38928327 12.35122155 21.01429166 13.15325928 22.63867188 C19.00091553 34.53610726 19.00091553 34.53610726 19.00091553 35.76367188 C11.32341885 37.88781794 3.45159742 39.11759745 -3.99908447 35.76367188 C-13.17366676 27.87787644 -19.41924723 15.32970955 -24.99908447 4.76367188 C-24.99908447 4.43367188 -24.99908447 4.10367187 -24.99908447 3.76367188 C-24.37340576 3.67802979 -23.74772705 3.5923877 -23.10308838 3.50415039 C-20.276238 3.11513669 -17.45016715 2.72072238 -14.62408447 2.32617188 C-13.14681885 2.12411133 -13.14681885 2.12411133 -11.63970947 1.91796875 C-10.69869385 1.78583984 -9.75767822 1.65371094 -8.78814697 1.51757812 C-7.91883545 1.39713135 -7.04952393 1.27668457 -6.15386963 1.15258789 C-3.76029802 0.72057344 -2.43239387 -0.28755317 0 0 Z"
                fill="#9E7449"
                transform="translate(335.99908447265625,396.236328125)"
            />
        </svg>
    );
}


function FireFlames() {
    return (
        <motion.div
            className="absolute inset-0"
            animate={{
                scale: [1, 1.02, 1],
                rotate: [0, 0.5, -0.5, 0],
            }}
            transition={{
                duration: 5,
                repeat: Infinity,
                ease: "easeInOut",
            }}
        >
            <svg viewBox="0 0 512 512" className="w-full h-full">
                {/* Red main fire */}
                <motion.path
                    d="M0 0 C0.33 0 0.66 0 1 0 C1.4304143 6.5651444 1.8572862 13.13051237 2.28173828 19.69604492 C2.42643697 21.92786836 2.5719357 24.15964009 2.71826172 26.39135742 C2.92888193 29.60582308 3.13659016 32.82046595 3.34375 36.03515625 C3.40937134 37.02709488 3.47499268 38.01903351 3.54260254 39.04103088 C4.54556746 54.74531905 4.54556746 54.74531905 1 59 C-1.92578125 60.7734375 -1.92578125 60.7734375 -5.3125 62.375 C-12.57414224 66.12294438 -16.95940696 69.51207317 -19.6875 77.3125 C-20.13116778 78.87325988 -20.5685051 80.435831 -21 82 C-21.2784375 82.79535156 -21.556875 83.59070313 -21.84375 84.41015625 C-24.98976897 93.60060981 -25.2611935 101.84175593 -21.1875 110.78125 C-17.40236478 117.85347634 -11.64405271 122.24801507 -4.01171875 124.6171875 C4.0418603 126.14971322 10.7816443 124.75714771 18 121 C21.36578103 118.65858711 24.15720955 115.94807898 27 113 C31.78789136 129.75883558 27.56938779 146.3882765 19.78515625 161.25 C19.41648437 161.96091797 19.0478125 162.67183594 18.66796875 163.40429688 C17.95423005 164.75737394 17.21732085 166.09859412 16.453125 167.42382812 C13.68933757 172.49788575 13.6439464 175.55250572 15 181 C18.25857815 183.17238543 19.71715807 183.35903236 23.52050781 182.76220703 C28.49975301 181.2315647 32.79583985 178.31152485 37.16259766 175.52807617 C38.85498802 174.45024501 40.56222749 173.39584575 42.26953125 172.34179688 C62.89470566 159.43000449 77.47276306 143.66469691 83.25 119.375 C84.66310598 111.37628689 84.68395826 103.1006489 85 95 C94.82778533 107.00469262 101.17542406 120.59746004 101.1875 136.1875 C101.19974609 137.00025391 101.21199219 137.81300781 101.22460938 138.65039062 C101.26133419 154.03808716 95.02724145 169.60245425 84.375 180.74609375 C78.55040249 186.32462326 72.22308868 191.33074717 65.80834961 196.20898438 C60.93620367 199.93161834 56.48542594 203.77867128 53.25 209.0625 C52.84265625 209.71347656 52.4353125 210.36445313 52.015625 211.03515625 C49.02992181 216.81134358 49.17858692 223.61577809 50.68359375 229.81640625 C53.7026267 238.82339668 57.89111607 245.27392355 66.16796875 250.08984375 C72.80271021 253.38599462 81.82705897 253.10377388 88.89453125 251.234375 C94.89008535 248.55289884 98.82241483 244.39530032 102.9921875 239.40234375 C104.88866814 237.13320835 106.87949577 235.05869581 109 233 C109.7458147 253.21986527 104.18020729 271.74574324 90.625 287.1875 C89.09920113 288.80676669 87.55837992 290.4120646 86 292 C85.39671875 292.62777344 84.7934375 293.25554687 84.171875 293.90234375 C70.6437899 306.87166012 50.908963 312.40208858 32.61230469 313.10351562 C28.88119796 313.00256429 26.10439477 312.85523426 23.09326172 310.5234375 C19.56087617 306.47310996 17.20413672 301.87230222 15 297 C18.556083 290.2655864 22.31414889 283.85140169 26.6796875 277.60546875 C28.31904062 274.37041393 28.60853276 272.58098122 28 269 C23.80219764 264.01403444 18.41846268 260.76278757 12.9921875 257.23828125 C12.02975128 256.60641403 11.06731506 255.97454681 10.07571411 255.3235321 C7.01245645 253.31422159 3.94385565 251.31324759 0.875 249.3125 C-1.19697576 247.95562949 -3.26859436 246.59821342 -5.33984375 245.24023438 C-9.89075264 242.25768794 -14.44506601 239.28042413 -19.00247192 236.30781555 C-20.67381179 235.21356096 -22.33782046 234.10811969 -24 233 C-26.9149255 232.4161804 -26.9149255 232.4161804 -30 233 C-33.85675962 236.35316999 -36.3421138 239.90283667 -38.875 244.3125 C-39.65258779 245.64460964 -40.43272799 246.97523129 -41.21484375 248.3046875 C-41.86622314 249.41215332 -41.86622314 249.41215332 -42.53076172 250.54199219 C-45.42610434 255.38584554 -48.43894954 260.15712076 -51.4375 264.9375 C-52.08066162 265.96399658 -52.72382324 266.99049316 -53.38647461 268.0480957 C-54.65694543 270.07514808 -55.92785063 272.10192826 -57.19921875 274.12841797 C-59.78343451 278.24928914 -62.36066919 282.37450858 -64.9375 286.5 C-65.73823972 287.78127596 -66.53901597 289.06252908 -67.33984375 290.34375 C-67.88769531 291.2203125 -68.43554688 292.096875 -69 293 C-85.37956157 291.1432076 -101.92202701 276.43746 -111.703125 264.2578125 C-120.94090365 251.1552489 -124.42258226 237.87761883 -123 222 C-120.34651569 208.71668933 -111.24103118 199.55720555 -101.01171875 191.41796875 C-94.62282405 186.23297712 -90.72556663 179.93997212 -89.70703125 171.6015625 C-89.41606915 166.11260174 -90.09867001 162.32731795 -92.5 157.375 C-96.06915688 149.75409602 -95.43798704 142.2146903 -95 134 C-94.34 133.67 -93.68 133.34 -93 133 C-92.79246094 133.73863281 -92.58492187 134.47726563 -92.37109375 135.23828125 C-89.54537057 144.54306846 -85.43305538 152.38883493 -78.8125 159.5625 C-73.42065089 165.633751 -71.40070732 172.72894931 -71.7265625 180.75 C-72.08075794 183.66452244 -72.99926938 186.24799078 -74 189 C-74.43603768 192.63364733 -74.42678077 194.30648125 -72.5 197.4375 C-69.5612161 199.27423993 -67.54125629 199.50061351 -64.13671875 198.83984375 C-54.30346739 194.97485464 -47.64866778 181.65594379 -43.35546875 172.48828125 C-35.94417719 154.09888059 -37.97341296 135.38735543 -45.1875 117.3125 C-45.51105469 116.56613281 -45.83460938 115.81976563 -46.16796875 115.05078125 C-50.1040153 105.34925805 -49.08795542 92.31467686 -45.296875 82.74609375 C-40.84887991 73.32759813 -34.88938334 66.67278855 -27.4934082 59.48828125 C-22.60941309 54.71471751 -18.47307014 49.91333226 -15 44 C-14.35224609 42.96359375 -14.35224609 42.96359375 -13.69140625 41.90625 C-9.09451162 33.772181 -7.13609769 24.46439576 -4.69775391 15.515625 C-3.25307889 10.30711157 -1.62571032 5.15445802 0 0 Z"
                    fill="#E9342E"
                    transform="translate(275,72)"
                    animate={{
                        opacity: [1, 0.9, 1],
                    }}
                    transition={{
                        duration: 5,
                        repeat: Infinity,
                    }}
                />
            </svg>
        </motion.div>
    );
}

// Smoke animation for light mode
function SmokeCloud() {
    return (
        <div className="absolute inset-0 pointer-events-none">
            {[...Array(6)].map((_, i) => (
                <SmokeParticle key={i} index={i} />
            ))}
        </div>
    );
}

export function CampfireToggle() {
    const [isDark, setIsDark] = useState(true);

    useEffect(() => {
        // Check initial theme
        const html = document.documentElement;
        setIsDark(html.classList.contains("dark"));
    }, []);

    const toggleTheme = () => {
        const html = document.documentElement;
        if (isDark) {
            html.classList.remove("dark");
        } else {
            html.classList.add("dark");
        }
        setIsDark(!isDark);
    };

    return (
        <motion.button
            onClick={toggleTheme}
            className="fixed right-0 bottom-0 w-12 h-12 z-50 cursor-pointer"
            whileTap={{ scale: 0.95 }}
            aria-label="Toggle theme"
        >
            <div className="relative w-full h-full">
                <CampfireBase />

                <AnimatePresence mode="wait">
                    {isDark ? (
                        <motion.div
                            key="fire"
                            initial={{ opacity: 0, scale: 0.8 }}
                            animate={{ opacity: 1, scale: 1 }}
                            exit={{ opacity: 0, scale: 0.8 }}
                            transition={{ duration: 0.3 }}
                            className="absolute inset-0"
                        >
                            <FireFlames />
                            {[...Array(5)].map((_, i) => (
                                <Sparkle key={i} index={i} />
                            ))}
                        </motion.div>
                    ) : (
                        <motion.div
                            key="smoke"
                            initial={{ opacity: 0 }}
                            animate={{ opacity: 1 }}
                            exit={{ opacity: 0 }}
                            transition={{ duration: 0.3 }}
                            className="absolute inset-0"
                        >
                            <SmokeCloud />
                        </motion.div>
                    )}
                </AnimatePresence>
            </div>
        </motion.button>
    );
}
